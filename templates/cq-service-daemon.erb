#! /bin/sh
### BEGIN INIT INFO
# Provides:          cq55-<%= name %>
# Required-Start:    $local_fs $remote_fs $network
# Required-Stop:     $local_fs $remote_fs $network
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: CQ55 <%= name %>.
# Description:       CQ55 <%= name %>.
### END INIT INFO

CQ_HOME="<%= dir %>";

ulimit -n 64000
 
case "$1" in
  start|"")
        # start instance
        bash $CQ_HOME/crx-quickstart/bin/start 2>&1 1> $CQ_HOME/logs/start.log &
        ;;
  restart)
        # restart instance
        bash $CQ_HOME/crx-quickstart/bin/stop 2>&1 1> $CQ_HOME/logs/stop.log &
        bash $CQ_HOME/crx-quickstart/bin/start 2>&1 1> $CQ_HOME/logs/start.log &
        ;;
  stop)
        # start instance
        bash $CQ_HOME/crx-quickstart/bin/stop 2>&1 1> $CQ_HOME/logs/stop.log &
        ;;
  status)
        # status of the instance
        bash $CQ_HOME/crx-quickstart/bin/status
        ;;
  *)
        echo "Usage: cq-<%= name %> [start|stop|status|restart]" >&2
        exit 3
        ;;
esac